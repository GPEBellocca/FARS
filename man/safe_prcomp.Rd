% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/safe_prcomp.R
\name{safe_prcomp}
\alias{safe_prcomp}
\title{Safe principal component calculation}
\usage{
safe_prcomp(x, k = NULL)
}
\arguments{
\item{x}{A numeric matrix for which principal components should be
computed. Must not contain \code{NA}, \code{NaN} or \code{Inf} values.}

\item{k}{Optional integer specifying the maximum number of right
singular vectors (principal component loadings) to retain.
If NULL, it defaults to min(nrow(x), ncol(x)). The value is
always truncated to min(nrow(x), ncol(x)).}
}
\value{
An object of class \code{prcomp} with at least the components:
\itemize{
\item{sdev} The singular values (standard deviations of the components).
\item{rotation} The matrix of variable loadings (right singular vectors).
}
}
\description{
Wrapper around \code{\link[stats:prcomp]{stats::prcomp()}} that first tries the standard
LAPACK-based PCA and, if it fails (for example due to a
\code{La.svd} / \code{dgesdd} error), falls back to more robust
alternatives. It first tries \code{\link[=svd]{svd()}} on the data matrix,
and if that also fails, it computes the principal components
via an eigendecomposition of \eqn{X'X}. This is useful in
simulation or subsampling contexts where some matrices of
residuals may be nearly singular or numerically problematic.
}
\keyword{internal}
